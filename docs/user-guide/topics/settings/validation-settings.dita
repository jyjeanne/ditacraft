<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="validation-settings">
    <title>Validation Settings</title>
    <shortdesc>Configure validation engine, automatic validation, cross-reference checking, DITA rules, and profiling validation.</shortdesc>

    <refbody>
        <section id="validation-engine">
            <title>ditacraft.validationEngine</title>
            <p><b>Type:</b> String (enum)</p>
            <p><b>Default:</b> <codeph>"built-in"</codeph></p>
            <p><b>Options:</b></p>
            <dl>
                <dlentry>
                    <dt><codeph>"built-in"</codeph></dt>
                    <dd>Lightweight validation with content model checking. Fast and suitable for most DITA authoring workflows. The default engine.</dd>
                </dlentry>
                <dlentry>
                    <dt><codeph>"typesxml"</codeph></dt>
                    <dd>Full DTD validation using TypesXML parser. Provides 100% W3C conformance with complete DTD support. Best for strict compliance checking.</dd>
                </dlentry>
                <dlentry>
                    <dt><codeph>"xmllint"</codeph></dt>
                    <dd>External validation using libxml2's xmllint tool. Requires xmllint to be installed on your system. Provides excellent performance and accuracy.</dd>
                </dlentry>
            </dl>
            <p><b>Choosing an Engine:</b></p>
            <simpletable>
                <sthead>
                    <stentry>Use Case</stentry>
                    <stentry>Recommended Engine</stentry>
                </sthead>
                <strow>
                    <stentry>General DITA authoring</stentry>
                    <stentry><codeph>built-in</codeph> (default)</stentry>
                </strow>
                <strow>
                    <stentry>Strict DTD conformance required</stentry>
                    <stentry><codeph>typesxml</codeph> or <codeph>xmllint</codeph></stentry>
                </strow>
                <strow>
                    <stentry>Very large files (1000+ elements)</stentry>
                    <stentry><codeph>built-in</codeph> or <codeph>xmllint</codeph></stentry>
                </strow>
                <strow>
                    <stentry>Quick syntax checking only</stentry>
                    <stentry><codeph>built-in</codeph></stentry>
                </strow>
            </simpletable>
        </section>

        <section id="auto-validate">
            <title>ditacraft.autoValidate</title>
            <p><b>Type:</b> Boolean</p>
            <p><b>Default:</b> <codeph>true</codeph></p>
            <p>When enabled, DitaCraft validates DITA files automatically:</p>
            <ul>
                <li>When a file is opened</li>
                <li>When a file is saved</li>
                <li>After typing stops (with 500ms debounce)</li>
            </ul>
            <p>Set to <codeph>false</codeph> to disable automatic validation. You can still validate manually using <uicontrol>Ctrl+Shift+V</uicontrol>.</p>
            <p><b>When to Disable:</b></p>
            <ul>
                <li>Working with very large files that cause performance issues</li>
                <li>Editing files that are intentionally incomplete</li>
                <li>When you prefer manual validation control</li>
            </ul>
        </section>

        <section id="max-problems">
            <title>ditacraft.maxNumberOfProblems</title>
            <p><b>Type:</b> Number</p>
            <p><b>Default:</b> <codeph>100</codeph></p>
            <p>The maximum number of diagnostic problems reported per file. Increase this value if you work with very large files and need to see all issues. Decrease it if the Problems panel becomes overwhelming.</p>
        </section>

        <section id="dita-rules-enabled">
            <title>ditacraft.ditaRulesEnabled</title>
            <p><b>Type:</b> Boolean</p>
            <p><b>Default:</b> <codeph>true</codeph></p>
            <p>Enable or disable the DITA Rules Engine. When enabled, DitaCraft validates your content against 18 Schematron-equivalent rules covering specification compliance, best practices, and accessibility. Set to <codeph>false</codeph> to disable all DITA rules validation.</p>
        </section>

        <section id="dita-rules-categories">
            <title>ditacraft.ditaRulesCategories</title>
            <p><b>Type:</b> Array of strings</p>
            <p><b>Default:</b> <codeph>["mandatory", "recommendation", "authoring", "accessibility"]</codeph></p>
            <p>Select which DITA rule categories to apply. Available categories:</p>
            <ul>
                <li><codeph>"mandatory"</codeph> — Rules required by the DITA specification</li>
                <li><codeph>"recommendation"</codeph> — Best practices recommended by the DITA specification</li>
                <li><codeph>"authoring"</codeph> — Content quality and consistency rules</li>
                <li><codeph>"accessibility"</codeph> — Accessibility compliance rules</li>
            </ul>
            <p>For example, to run only mandatory and accessibility rules:</p>
            <codeblock outputclass="language-json">{
    "ditacraft.ditaRulesCategories": ["mandatory", "accessibility"]
}</codeblock>
        </section>

        <section id="cross-ref-validation-enabled">
            <title>ditacraft.crossRefValidationEnabled</title>
            <p><b>Type:</b> Boolean</p>
            <p><b>Default:</b> <codeph>true</codeph></p>
            <p>Enable or disable cross-reference validation. When enabled, DitaCraft checks that href, conref, keyref, and conkeyref attributes point to valid targets. Set to <codeph>false</codeph> if you are working with incomplete content where references are expected to be unresolved.</p>
        </section>

        <section id="subject-scheme-validation-enabled">
            <title>ditacraft.subjectSchemeValidationEnabled</title>
            <p><b>Type:</b> Boolean</p>
            <p><b>Default:</b> <codeph>true</codeph></p>
            <p>Enable or disable subject scheme validation. When enabled and a subject scheme map is present in the workspace, DitaCraft validates that profiling attribute values (audience, platform, product, etc.) match the controlled vocabulary defined by the scheme. Set to <codeph>false</codeph> to allow any profiling attribute values.</p>
        </section>

        <section id="rate-limiting">
            <title>Rate Limiting</title>
            <p>DitaCraft includes built-in rate limiting to prevent performance issues:</p>
            <ul>
                <li><b>Limit:</b> 10 validation requests per second per file</li>
                <li><b>Behavior:</b> Excess requests are silently skipped during auto-validation</li>
                <li><b>Manual Validation:</b> Shows a warning if rate limited</li>
            </ul>
            <p>Rate limiting cannot be configured but ensures stable performance during rapid editing.</p>
        </section>

        <section id="xmllint-setup">
            <title>Setting Up xmllint</title>
            <p>To use the <codeph>xmllint</codeph> engine, install libxml2:</p>
            <p><b>Windows:</b></p>
            <ol>
                <li>Download from <xref href="https://www.zlatkovic.com/libxml.en.html" format="html" scope="external">zlatkovic.com</xref></li>
                <li>Add the bin directory to your PATH</li>
            </ol>
            <p><b>macOS:</b></p>
            <codeblock>brew install libxml2</codeblock>
            <p><b>Linux (Debian/Ubuntu):</b></p>
            <codeblock>sudo apt-get install libxml2-utils</codeblock>
            <p><b>Verification:</b></p>
            <codeblock>xmllint --version</codeblock>
        </section>
    </refbody>
</reference>
